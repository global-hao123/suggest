(function(a,b,c){String.trim||(String.prototype.trim=function(){var a=this,a=a.replace(/^\s\s*/,""),b=/\s/,c=a.length;while(b.test(a.charAt(--c)));return a.slice(0,c+1)}),String.replaceTpl||(String.prototype.replaceTpl=function(a){return this.replace(/#\{([^}]*)\}/mg,function(b,c){return b=a[c.trim()]})}),String.htmlEncode||(String.prototype.htmlEncode=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")});var d=" ",e=null,f=!!a.Element&&!!Element.prototype.hasOwnProperty("classList"),g=/\w/.test("\u0130"),h=g&&!a.XMLHttpRequest,i=b.documentMode&&b.documentMode===9,j=function(b,c){c=c||a;if(!b)return c;var d=b.replace(/^window\.?/,"").split("."),e;d.pop();while(e=d.shift())c=c[e]=c[e]||{};return c},k=f?function(a,b){return a.classList.contains(b)}:function(a,b){return-1<(d+a.className+d).indexOf(d+b+d)},l=f?function(a,b){a.classList.add(b)}:function(a,b){k(a,b)||(a.className+=(a.className?d:"")+b)},m=f?function(a,b){a.classList.remove(b)}:function(a,b){if(!!k(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c,d)}},n=b.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},o=function(b,c,d){n(b,c,function(b){b=b||a.event;var c=b.srcElement||b.target;d.call(c,b)})},p=g?function(a,b){b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});return a.currentStyle[b]}:function(a,c){return b.defaultView.getComputedStyle(a,null).getPropertyValue(c)},q=function(a,d){if(!(this instanceof q))return new q(a,d);var e=this;e.el=a+""===a?b.getElementById(a):a;!e.el||(e.o={classNameWrap:d.classNameWrap||"sug-wrap",classNameQuery:d.classNameQuery,classNameQueryNull:d.classNameQueryNull,classNameSelect:d.classNameSelect||"sug-select",classNameClose:d.classNameClose||"sug-close",classNameShim:d.classNameShim||"sug-shim",locAbs:d.locAbs||!1,pressDelay:d.pressDelay===c?3:d.pressDelay,autoFocus:d.autoFocus||!1,delay:d.delay||200,n:d.n||10,autoCompleteData:d.autoCompleteData||!1,url:d.url||!1,charset:d.charset,callbackFn:d.callbackFn||!1,callbackName:d.callbackName||!1,callbackDataKey:d.callbackDataKey||!1,callbackDataNum:d.callbackDataNum||!1,requestQuery:d.requestQuery||!1,requestParas:d.requestParas||{},noSubmit:d.noSubmit||!1,onSelect:d.onSelect,onShow:d.onShow,onHide:d.onHide,onRequest:d.onRequest,onSucess:d.onSucess,onError:d.onError,customUrl:d.customUrl||!1,templ:d.templ||!1},e.wrap=e.el.parentNode,e.init())},r=q.prototype;r.init=function(){var a=this,b=a.o;a.layoutInit(),a.reset(),a.inputHandle(),b.autoFocus&&setTimeout(function(){a.el.focus()},16);if(!b.autoCompleteData){var c=b.callbackFn,d=j(c),e=c.split(".").pop();a.callback=function(b){var d=arguments.callee;a=c&&d.repeat?d.context||a:a,a.o.onSucess&&a.o.onSucess.call(a);if(!b)a.hide(1);else{var e=a.o.callbackDataKey||a.o.callbackDataNum,f=e?b[e]:b;if(!f||!f.length){a.hide(1);return}a.fill(b,a.q),a.show(),a.cache[a.q]=b}},d[e]?d[e].repeat=!0:c&&(d[e]=a.callback)}},r.reset=function(){var a=this;a.cache={},a.q="",a.s=e,a.i=-1,a.t=0,a.hide(1)},r.layoutInit=function(){var a=this,c=a.o,d=c.locAbs?b.body:a.wrap,e=a.sugWrap=b.createElement("div");a.el.setAttribute("autocomplete","off");if(h){var f=a.shim=e.appendChild(b.createElement("iframe"));f.src="about:blank",l(f,c.classNameShim),f.frameBorder=0,f.scrolling="no",a.content=e.appendChild(e.cloneNode(null))}else a.content=e;l(e,c.classNameWrap),!c.locAbs&&p(d,"position")==="static"&&(d.style.position="relative"),d.appendChild(e)},r.show=function(){this.sugWrap.style.display="",this.o.onShow&&this.o.onShow.call(this)},r.hide=function(a){var b=this;b.sugWrap.style.display="none",a!=2&&(b.s=e,b.i=-1),a==1&&b.fill(),b.o.onHide&&b.o.onHide.call(b)},r.holdFocus=function(b,c){c.preventDefault?c.preventDefault():b.onbeforedeactivate=function(){a.event.returnValue=!1,b.onbeforedeactivate=null}},r.inputTimer=function(a){var b=this,c=b.el,d=b.t,e;if(a){if(d)return;b.t=setInterval(function(){e=c.value;e.trim()?e!==b.q&&b.updata(e):(b.hide(1),b.q=e)},b.o.delay)}else d&&clearInterval(b.t),b.t=0},r.getIndex=function(a,b){var c=b.length;while(c--)if(b[c]===a)return c;return-1},r.matchEl=function(a,b,c){if(a===b)return e;if(c.call(a))return a;a=a.parentNode,arguments.callee(a,b,c)},r.submitForm=function(){var a=this.el.form;a.onsubmit?a.onsubmit():a.submit(),this.q=this.el.value},r.keydownMove=function(a){var b=this,d=b.sugWrap.getElementsByTagName("OL")[0];if(!!d){if(b.isHide){b.isHide=!1;return}var f=d.getElementsByTagName("LI"),g=f.length,h=b.el,i=b.s,j=b.o,k=j.classNameSelect,n=b.q||"",o;i&&(m(i,k),b.i=b.getIndex(i,f),b.s=e),b.i===c&&(b.index=-1),b.i!==-1&&m(f[b.i],k),a===40?b.i++:a===38&&b.i--,b.i===-2?b.i=g-1:b.i===g?(h.value=n,b.i=-1):b.i===-1&&(h.value=n),b.i!==-1&&b.i!==g&&(o=f[b.i],l(o,k),!j.autoCompleteData&&(h.value=o.getAttribute("q")),b.s=o)}},r.inputHandle=function(){var a=this,b=a.o,c=a.el,d=c.form,e=a.sugWrap,f=b.classNameSelect,i=b.autoCompleteData,j=0,p;c.onkeydown=function(d){d=d||window.event,p=d.keyCode;if(p===27){a.hide(2),a.isHide=!0,!i&&(c.value=a.q),a.inputTimer();if(h)return!1}else if(p>32&&p<41){if(!c.value)c.blur();else if(p===40||p===38)!b.pressDelay||j++===0?(a.show(),a.inputTimer(),a.keydownMove(p)):j===b.pressDelay&&(j=0),!g&&d.preventDefault()}else if(p===13){a.inputTimer(),a.hide(),b.onSelect&&b.onSelect.call(a);if(i){c.value=a.s?a.s.getAttribute("q"):"";return!1}if(b.noSubmit)return!1}else{if(p>8&&p<19){a.holdFocus(c,d);return}a.inputTimer(1)}},n(c,"keyup",function(){j=0}),n(c,"blur",function(){a.hide(2),a.isHide=!0,a.inputTimer()}),o(e,"mouseover",function(){var b=a.matchEl(this,e,function(){return this.tagName==="LI"});!b||(a.s&&m(a.s,f),l(b,f),a.s=b)}),o(e,"mouseout",function(){this.tagName==="LI"&&m(this,f)}),n(e,"mousedown",function(b){a.inputTimer(),a.holdFocus(c,b)}),o(e,"mouseup",function(d){var f=e.getElementsByTagName("OL")[0],g;if(!(!f||d.which&&d.which>2||d.button&&d.button!==1&&d.button!==4)){k(this,b.classNameClose)&&a.hide(),g=a.matchEl(this,e,function(){return this.tagName==="LI"});if(!g)return;c.value=g.getAttribute("q"),a.hide(),a.inputTimer(),b.onSelect&&b.onSelect.call(a),a.i=a.getIndex(g,f.getElementsByTagName("LI")),!b.autoCompleteData&&!b.noSubmit&&a.submitForm()}})},r.fill=function(a,b){var d=this,e=d.content;if(arguments.length<2)e.innerHTML="";else{var f=d.o,g=f.templ,h=f.classNameQueryNull,i=f.classNameQuery;this.content.innerHTML=g?g.call(d,a,b):function(){a=a[f.callbackDataKey||f.callbackDataNum]||[];var d=0,e=Math.min(a.length,f.n),g=[],j;for(;d<e;d++)j=a[d],j!==c&&g.push('<li q="'+j+'"'+(h&&j.indexOf(b)>-1?"":" class="+h)+">"+(i?j.replace(b,'<span class="'+i+'">'+b+"</span>"):j)+"</li>");return"<ol>"+g.join("")+"</ol>"}()}},r.updata=function(a){var b=this,d=b.o.autoCompleteData||b.cache[a];b.q=a,b.i=-1;d!==c?(b.fill(d,a),b.show()):b.request(a)},r.request=function(a){var c=this,d=c.o,f=d.callbackFn,h=d.callbackName,k=d.onSucess,l=d.onError,m=d.onRequest,n=c.callback,o=d.url,p=d.customUrl,q=d.requestParas,r=[],s,t;f?(t=j(f)).repeat&&(t.context=c):h&&(t=c.script,t.readyState?t.onreadystatechange=function(){if(t.readyState=="loaded"||t.readyState=="complete")t.onreadystatechange=e,k&&k.call(c),n(h)}:t.onload=function(){k&&k.call(c),n(h)}),l&&(c.script.onerror=function(){l.call(c)});if(!c.script||!g||i){var u=b.getElementsByTagName("script")[0],v=d.charset;t=b.createElement("script"),t.type="text/javascript",v&&(t.charset=v),t.async=!0,c.script?u.parentNode.replaceChild(t,c.script):u.parentNode.insertBefore(t,u),c.script=t}m&&m.call(this),q=function(){for(s in q)(t=q[s])&&r.push("&"+s+"="+q[s]);return r.join("")}(),c.script.src=p&&p.call(c,q)||o+"?"+d.requestQuery+"="+encodeURIComponent(a)+q},a.G||(a.G={}),G.suggest=G.sug=q})(window,document)